<h2>DB Lock vs Redis 분산락</h2>

>DB Lock

- 구현 복잡도: 내장된 락을 사용하거나 ORM을 사용하여, 단편적인 구현이 어렵지 않음
- 효율성 : 일반적 연산에 대한 락을 제공하는데 효과적
- 성능 : 병목 현상을 유발할 수 있으며, 락이 자주 요청되는 경우 성능 저하나 과도한 db부하를 유발
- 장점 : 일관성과  ACID 특성을 유지하기 용이
- 단점 : 병목 현상과 db 성능 저하를 유발, 분산환경에서 구현 어려움

>Redis 분산락:

- 구현복잡도 : 분산 환경에서 락을 구현하기 간단한 편, Redis 자체 라이브러리나 템플릿을 제공
- 효율성 : 인메모리 기반의 빠른 속도
- 성능 : key-value의 원자성을 이용한 락이기 때문에, DB 부하 최소화
- 장점 : 빠른속도, db부하 최소화
- 단점 : 데이터 일관성과 클러스터 구성에 대한 추가 처리가 필요

<br>

<h2>Redis Lettuce vs Redisson</h2>

>Lettuce
- 구현이 간단한편
- Spin Lock : 많은 스레드가 획득 대기시, 많은 redis 부하

>Redisson
- 락 획득 재시도 기본 제공
- pub-sub : 적은 redis 부하

<br>


<h2>좌석 선점 (예약)</h2>

>같은 좌석에대한 동시예약 요청 제어

- 현재 : 예약번호(콘서트날짜 + 콘서트 아이디 + 좌석번호)를 유니키 키 중복방지로 제어
- 개선 : Redis simple lock 으로 제어
- 이유 :
1) DB 부하 최소화
2) 최초의 시도에서 좌석예약에 실패했다면, 임시배정된 좌석에 관하여 다시 시도할 필요가 없음
3) 따라서 구현이 간편한 Redis Lettuce 사용

>임시 배정 유효시간 

- 현재 : 짧은 텀의 스케쥴러로, 최초의 생성시간으로부터 5분이 지났는데 최종 결제되지 않은 내역이 있다면 삭제 
- 개선 : Redis ttl로 유효시간 관리
- 이유 :
1) 짧은텀의 스케쥴러 사용과 물리적 delete으로 인한 db 부하 최소화 
2) 실시간성 개선


<h2>유저 포인트 관리</h2>

> 충전/사용 동시 요청 처리 방지(따닥 방지)

- 현재 : DB 락으로 제어
- 개선 : Redis simple lock 으로 제어
- 이유 :
1) DB 부하 최소화
2) 최초의 충전/사용 시도를 실패했다면, 다시 락을 획득하기 위해 시도할 필요 없음.



